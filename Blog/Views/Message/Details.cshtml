@model Blog.Data.Models.Message
@{
    ViewBag.Title = "Details";
}
<section id="about">
    <div class="container">
        <div class="row">
            <div class="col-lg-10">
                <div class="card">
                    <div class="card-header">
                        @Model.Subject
                    </div>
                    <div class="card-body">
                        <p class="card-text">@Model.Body</p>
                        @{
                            var edit = Url.Action("Edit", "Message") + "/" + Model.Id;
                            Url.Action("Delete", "Message");
                        }
                        <div class="row pull-right">
                            <a type="button"
                               class="btn btn-sm text-white btn-primary"
                               href="@edit">
                                <i class="fa fa-edit"></i>
                                Редагувати
                            </a>

                            <button type="button"
                                    class="btn btn-sm text-white btn-danger"
                                    id="@Model.Id"
                                    onclick="setDeleteMessageValues(this.id)"
                                    data-toggle="modal"
                                    data-target="#delete-message">
                                <i class="fa fa-trash"></i>
                            </button>
                        </div>

                        @Html.ActionLink("Назад", "Index", "Message", null, new { @class = "btn btn-light" })
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<div id="delete-message" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Видалити це повідомлення?</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <input type='hidden' id="delete-id" />
            <div class="modal-footer">
                <button class="btn btn-sm btn-danger" type="button" id="confirm" onclick="deleteMessage('/Message/Delete/')">
                    <i class="fa fa-trash"></i>
                    Видалити
                </button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Скасувати</button>
            </div>
        </div>

    </div>
</div>
@Scripts.Render("~/public/plugins/jquery/jquery.js")
<script>
    function setDeleteMessageValues(id) {
        $("#delete-id").val(id);
    }

    function deleteMessage(url) {
        var id = $("#delete-id").val();
        ajaxQuery(id, url);
    }
    function ajaxQuery(id, url) {
        $.post(
            url + id,
            onAjaxSuccess
        );
    }
    function onAjaxSuccess() {
        location.href = "/Message";
    }
</script>